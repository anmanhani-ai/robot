# 🔌 แผนผังวงจร AgriBot ESP32

## 📋 สารบัญ

1. [ภาพรวมการเชื่อมต่อ](#ภาพรวมการเชื่อมต่อ)
2. [วงจร Motor Driver (ล้อซ้าย-ขวา)](#วงจร-motor-driver-ล้อซ้าย-ขวา)
3. [วงจร Motor Z (แขนยืด/หด)](#วงจร-motor-z-แขนยืดหด)
4. [วงจร Motor Y (หัวพ่นขึ้น/ลง)](#วงจร-motor-y-หัวพ่นขึ้นลง)
5. [วงจร Relay และปั๊ม](#วงจร-relay-และปั๊ม)
6. [วงจร Ultrasonic Sensors](#วงจร-ultrasonic-sensors)
7. [วงจร Buzzer](#วงจร-buzzer)
8. [วงจร LCD I2C](#วงจร-lcd-i2c)
9. [วงจรปุ่มควบคุม](#วงจรปุ่มควบคุม)
10. [วงจร Encoder (Optional)](#วงจร-encoder-optional)
11. [วงจรจ่ายไฟ](#วงจรจ่ายไฟ)

---

## ภาพรวมการเชื่อมต่อ

### 🎯 Master Wiring Diagram

```
                                    ┌─────────────────────────────────────────┐
                                    │            POWER SUPPLY                  │
                                    │  ┌───────────┐      ┌───────────┐       │
                                    │  │  12V 5A   │      │   5V 2A   │       │
                                    │  │  Adapter  │      │ (or Buck) │       │
                                    │  └─────┬─────┘      └─────┬─────┘       │
                                    │        │                  │             │
                                    └────────┼──────────────────┼─────────────┘
                                             │                  │
        ┌────────────────────────────────────┼──────────────────┼─────────────────────────────┐
        │                                    │                  │                              │
        │    ┌───────────────────────────────┼──────────────────┼───────────────────────┐     │
        │    │                               ▼                  ▼                       │     │
        │    │                          ┌─────────┐        ┌─────────┐                  │     │
        │    │                          │  12V    │        │   5V    │                  │     │
        │    │                          └────┬────┘        └────┬────┘                  │     │
        │    │                               │                  │                       │     │
        │    │    ┌──────────────────────────┼──────────────────┼──────────────────┐    │     │
        │    │    │           ESP32 DevKit V1                   │                  │    │     │
        │    │    │    ┌──────────────────────────────────────────────────────┐    │    │     │
        │    │    │    │                                                       │    │    │     │
        │    │    │    │   GPIO 32,33 ──────► Motor Left Driver                │    │    │     │
        │    │    │    │   GPIO 17,16 ──────► Motor Right Driver               │    │    │     │
        │    │    │    │   GPIO 26,27 ──────► Motor Z Driver                   │    │    │     │
        │    │    │    │   GPIO 13,2  ──────► Motor Y Driver                   │    │    │     │
        │    │    │    │                                                       │    │    │     │
        │    │    │    │   GPIO 4     ──────► Relay (Pump)                     │    │    │     │
        │    │    │    │   GPIO 14    ──────► Buzzer                           │    │    │     │
        │    │    │    │                                                       │    │    │     │
        │    │    │    │   GPIO 12,5  ──────► Ultrasonic Front                 │    │    │     │
        │    │    │    │   GPIO 18,19 ──────► Ultrasonic Right                 │    │    │     │
        │    │    │    │   GPIO 25,23 ──────► Ultrasonic Y-axis                │    │    │     │
        │    │    │    │                                                       │    │    │     │
        │    │    │    │   GPIO 21,22 ──────► LCD I2C                          │    │    │     │
        │    │    │    │                                                       │    │    │     │
        │    │    │    │   GPIO 15    ──────► Button Start                     │    │    │     │
        │    │    │    │   GPIO 34    ──────► Button Emergency (+ Pull-up)     │    │    │     │
        │    │    │    │                                                       │    │    │     │
        │    │    │    │   GPIO 35,36 ──────► Encoder (Optional + Pull-up)     │    │    │     │
        │    │    │    │                                                       │    │    │     │
        │    │    │    │   5V/VIN     ──────► Relay VCC, LCD VCC, US VCC       │    │    │     │
        │    │    │    │   3.3V       ──────► Pull-up Resistors                │    │    │     │
        │    │    │    │   GND        ──────► ทุกอุปกรณ์ (Common Ground)       │    │    │     │
        │    │    │    │                                                       │    │    │     │
        │    │    │    └───────────────────────────────────────────────────────┘    │    │     │
        │    │    └─────────────────────────────────────────────────────────────────┘    │     │
        │    └───────────────────────────────────────────────────────────────────────────┘     │
        └──────────────────────────────────────────────────────────────────────────────────────┘
```

### 📍 GPIO Summary Table

| GPIO | อุปกรณ์  | ทิศทาง | หมายเหตุ                 |
| ---- | --------------- | ------------ | -------------------------------- |
| 2    | Motor Y IN2     | OUTPUT       | มี LED onboard                 |
| 4    | Pump Relay      | OUTPUT       | Active HIGH                      |
| 5    | US Front ECHO   | INPUT        | <br />                           |
| 12   | US Front TRIG   | OUTPUT       | ⚠️ LOW ตอน boot             |
| 13   | Motor Y IN1     | OUTPUT       |                                  |
| 14   | Buzzer          | OUTPUT       |                                  |
| 15   | Button Start    | INPUT        | Internal Pull-up                 |
| 16   | Motor Right IN2 | OUTPUT       |                                  |
| 17   | Motor Right IN1 | OUTPUT       |                                  |
| 18   | US Right TRIG   | OUTPUT       |                                  |
| 19   | US Right ECHO   | INPUT        |                                  |
| 21   | LCD SDA         | I2C          |                                  |
| 22   | LCD SCL         | I2C          |                                  |
| 23   | US Y-axis ECHO  | INPUT        |                                  |
| 25   | US Y-axis TRIG  | OUTPUT       |                                  |
| 26   | Motor Z IN3     | OUTPUT       |                                  |
| 27   | Motor Z IN4     | OUTPUT       |                                  |
| 32   | Motor Left IN1  | OUTPUT       |                                  |
| 33   | Motor Left IN2  | OUTPUT       |                                  |
| 34   | Button E-Stop   | INPUT        | ⚠️ ต้อง Pull-up            |
| 35   | Encoder A       | INPUT        | ⚠️ ต้อง Pull-up (Optional) |
| 36   | Encoder B       | INPUT        | ⚠️ ต้อง Pull-up (Optional) |

---

## วงจร Motor Driver (ล้อซ้าย-ขวา)

### 📐 Schematic

```
                                    POWER SUPPLY 12V
                                          │
                                          │
              ┌───────────────────────────┴───────────────────────────┐
              │                                                        │
              │                    MOTOR DRIVER                        │
              │                   (L298N / TB6612)                     │
              │                                                        │
              │   ┌──────────────────────────────────────────────┐    │
              │   │                                               │    │
              │   │    12V ◄───────────────────────────────────── ┼────┘
              │   │                                               │
              │   │    GND ◄───────────────────────────────────── ┼──────┐
              │   │         │                                     │      │
              │   │         │ (Common Ground)                     │      │
              │   │         │                                     │      │
              │   │         └──────────────────────────────────── ┼──────┼───► ESP32 GND
              │   │                                               │      │
              │   │                                               │      │
              │   │   ┌───────────────────────────────────────┐   │      │
              │   │   │        MOTOR LEFT (ซ้าย)              │   │      │
              │   │   │                                       │   │      │
              │   │   │   IN1 ◄─────────────────────────────── ┼───┼──────┼───► ESP32 GPIO 32
              │   │   │   IN2 ◄─────────────────────────────── ┼───┼──────┼───► ESP32 GPIO 33
              │   │   │                                       │   │      │
              │   │   │   OUT1 ────────┐                      │   │      │
              │   │   │   OUT2 ────────┼───► DC MOTOR LEFT    │   │      │
              │   │   │                │    12V               │   │      │
              │   │   └────────────────┴──────────────────────┘   │      │
              │   │                                               │      │
              │   │   ┌───────────────────────────────────────┐   │      │
              │   │   │        MOTOR RIGHT (ขวา)              │   │      │
              │   │   │                                       │   │      │
              │   │   │   IN3_TEMP ◄─────────────────────────────── ┼───┼──────┼───► ESP32 GPIO 17
              │   │   │   IN4_TEMP ◄─────────────────────────────── ┼───┼──────┼───► ESP32 GPIO 16
              │   │   │                                       │   │      │
              │   │   │   OUT3_TEMP ────────┐                      │   │      │
              │   │   │   OUT4_TEMP ────────┼───► DC MOTOR RIGHT   │   │      │
              │   │   │                │    12V               │   │      │
              │   │   └────────────────┴──────────────────────┘   │      │
              │   │                                               │      │
              │   └───────────────────────────────────────────────┘      │
              │                                                          │
              └──────────────────────────────────────────────────────────┘
                                          │
                                          ▼
                                    POWER GND
```

### 🔌 Connection List

| Driver Pin  | Wire Color (แนะนำ) | ESP32 Pin             |
| ----------- | ----------------------- | --------------------- |
| 12V/VCC     | แดง                  | Power 12V+            |
| GND         | ดำ                    | Power GND + ESP32 GND |
| IN1 (Left)  | เหลือง            | GPIO 32               |
| IN2 (Left)  | เขียว              | GPIO 33               |
| IN3 (Right) | ส้ม                  | GPIO 17               |
| IN4 (Right) | น้ำเงิน          | GPIO 16               |

### 📊 Logic Table

| การเคลื่อนที่ | IN1 | IN2 | IN3 | IN4 |
| -------------------------- | --- | --- | --- | --- |
| เดินหน้า           | PWM | 0   | PWM | 0   |
| ถอยหลัง             | 0   | PWM | 0   | PWM |
| หมุนซ้าย           | 0   | PWM | PWM | 0   |
| หมุนขวา             | PWM | 0   | 0   | PWM |
| หยุด                   | 0   | 0   | 0   | 0   |

---

## วงจร Motor Z (แขนยืด/หด)

### 📐 Schematic

```
                              POWER SUPPLY 12V
                                    │
              ┌─────────────────────┴─────────────────────┐
              │                                            │
              │            MOTOR DRIVER Z                  │
              │                                            │
              │   ┌────────────────────────────────────┐   │
              │   │                                    │   │
              │   │    12V ◄────────────────────────── ┼───┘
              │   │                                    │
              │   │    GND ◄──────────────────────────────────────► ESP32 GND
              │   │                                    │
              │   │    IN3 ◄──────────────────────────────────────► ESP32 GPIO 26 (ยืด)
              │   │    IN4 ◄──────────────────────────────────────► ESP32 GPIO 27 (หด)
              │   │                                    │
              │   │    OUT3 ───────┐                   │
              │   │    OUT4 ───────┼───► DC MOTOR Z    │
              │   │                │    (แขนกล)        │
              │   └────────────────┴───────────────────┘
              │
              └───────────────────────────────────────────
                                    │
                                    ▼
                                POWER GND
```

### 🔌 Connection List

| Driver Pin | ESP32 Pin  | หน้าที่   |
| ---------- | ---------- | ---------------- |
| 12V/VCC    | Power 12V+ | ไฟเลี้ยง |
| GND        | ESP32 GND  | Ground ร่วม  |
| IN3        | GPIO 26    | PWM ยืดแขน |
| IN4        | GPIO 27    | PWM หดแขน   |

### 📊 Logic Table

| การเคลื่อนที่ | IN3 (GPIO 26) | IN4 (GPIO 27) |
| -------------------------- | ------------- | ------------- |
| ยืดออก (Extend)      | PWM           | 0             |
| หดเข้า (Retract)     | 0             | PWM           |
| หยุด                   | 0             | 0             |

---

## วงจร Motor Y (หัวพ่นขึ้น/ลง)

### 📐 Schematic

```
                              POWER SUPPLY 12V
                                    │
              ┌─────────────────────┴─────────────────────┐
              │                                            │
              │            MOTOR DRIVER Y                  │
              │                                            │
              │   ┌────────────────────────────────────┐   │
              │   │                                    │   │
              │   │    12V ◄────────────────────────── ┼───┘
              │   │                                    │
              │   │    GND ◄──────────────────────────────────────► ESP32 GND
              │   │                                    │
              │   │    IN3 ◄──────────────────────────────────────► ESP32 GPIO 13 (ขึ้น)
              │   │    IN4 ◄──────────────────────────────────────► ESP32 GPIO 2  (ลง)
              │   │                                    │      ⚠️ มี LED onboard
              │   │    OUT3 ───────┐                   │
              │   │    OUT4 ───────┼───► DC MOTOR Y    │
              │   │                │    (หัวพ่น)       │
              │   └────────────────┴───────────────────┘
              │
              └───────────────────────────────────────────
                                    │
                                    ▼
                                POWER GND
```

### 🔌 Connection List

| Driver Pin | ESP32 Pin  | หน้าที่   |
| ---------- | ---------- | ---------------- |
| 12V/VCC    | Power 12V+ | ไฟเลี้ยง |
| GND        | ESP32 GND  | Ground ร่วม  |
| IN1        | GPIO 13    | PWM ยกขึ้น |
| IN2        | GPIO 2     | PWM ลงล่าง |

> ⚠️ **หมายเหตุ**: GPIO 2 มี LED onboard - LED จะกะพริบตอน Motor ทำงาน (ไม่มีผลต่อการทำงาน)

---

## วงจร Relay และปั๊ม

### 📐 Schematic

```
                              POWER SUPPLY 12V
                                    │
                                    │
              ┌─────────────────────┴─────────────────────┐
              │                                            │
              │              RELAY MODULE 5V               │
              │                                            │
              │   ┌────────────────────────────────────┐   │
              │   │                                    │   │
              │   │    VCC ◄───────────────────────────────────────► ESP32 5V/VIN
              │   │                                    │   │
              │   │    GND ◄───────────────────────────────────────► ESP32 GND
              │   │                                    │   │
              │   │    IN  ◄───────────────────────────────────────► ESP32 GPIO 4
              │   │                                    │   │
              │   │                                    │   │
              │   │         ┌───────────────────┐      │   │
              │   │         │                   │      │   │
              │   │     NC ─┤   (Not Used)      │      │   │
              │   │         │                   │      │   │
              │   │    COM ─┼───────────────────┼──────┼───┼───► PUMP (+)
              │   │         │                   │      │   │
              │   │     NO ─┼───────────────────┼──────┼───┴───► Power 12V+
              │   │         │                   │      │
              │   │         └───────────────────┘      │
              │   │                                    │
              │   └────────────────────────────────────┘
              │
              │                                    PUMP (-)  ───────────► Power GND
              │
              └───────────────────────────────────────────────────────────
```

### 🔌 Connection List

| Pin       | Connect To   | หน้าที่           |
| --------- | ------------ | ------------------------ |
| Relay VCC | ESP32 5V     | ไฟเลี้ยง Relay   |
| Relay GND | ESP32 GND    | Ground                   |
| Relay IN  | ESP32 GPIO 4 | สัญญาณควบคุม |
| Relay COM | Pump (+)     | ขั้วบวกปั๊ม   |
| Relay NO  | Power 12V+   | ไฟ 12V                 |
| Pump (-)  | Power GND    | ขั้วลบปั๊ม     |

### 📊 Logic Table

| GPIO 4 | Relay State              | ปั๊ม   |
| ------ | ------------------------ | ---------- |
| HIGH   | ON (COM-NO เชื่อม) | ทำงาน |
| LOW    | OFF (COM-NO แยก)      | หยุด   |

---

## วงจร Ultrasonic Sensors

### 📐 Schematic - ทั้ง 3 ตัว

```
              ESP32 5V ───────────────┬────────────────┬────────────────┐
                                      │                │                │
                                      ▼                ▼                ▼
                               ┌──────────┐     ┌──────────┐     ┌──────────┐
                               │ US FRONT │     │ US RIGHT │     │ US Y-AXIS│
                               │ HC-SR04  │     │ HC-SR04  │     │ HC-SR04  │
                               │          │     │          │     │          │
                               │  VCC ────┘     │  VCC ────┘     │  VCC ────┘
                               │          │     │          │     │          │
              ESP32 GND ───────┼─ GND     │     │  GND ────┼─────┼─ GND     │
                               │          │     │          │     │          │
              GPIO 12 ─────────┼─ TRIG    │     │          │     │          │
              GPIO 5  ─────────┼─ ECHO    │     │          │     │          │
                               │          │     │          │     │          │
              GPIO 18 ─────────┼──────────┼─────┼─ TRIG    │     │          │
              GPIO 19 ─────────┼──────────┼─────┼─ ECHO    │     │          │
                               │          │     │          │     │          │
              GPIO 25 ─────────┼──────────┼─────┼──────────┼─────┼─ TRIG    │
              GPIO 23 ─────────┼──────────┼─────┼──────────┼─────┼─ ECHO    │
                               │          │     │          │     │          │
                               └──────────┘     └──────────┘     └──────────┘
                                    │                │                │
                                    ▼                ▼                ▼
                               หน้าหุ่น         ข้างขวา          หัวพ่น
                               (ชี้หน้า)        (ชี้ขวา)        (ชี้ลงพื้น)
```

### 🔌 Connection Table

| Sensor | VCC | GND | TRIG    | ECHO    | ตำแหน่งติดตั้ง    |
| ------ | --- | --- | ------- | ------- | ------------------------------- |
| Front  | 5V  | GND | GPIO 12 | GPIO 5  | หน้าหุ่น ชี้ตรง   |
| Right  | 5V  | GND | GPIO 18 | GPIO 19 | ข้างขวา ชี้ออก     |
| Y-axis | 5V  | GND | GPIO 25 | GPIO 23 | หัวพ่น ชี้ลงพื้น |

---

## วงจร Buzzer

### 📐 Schematic

```
                    ESP32 GPIO 14
                          │
                          │
                          ▼
                    ┌───────────┐
                    │           │
                    │  BUZZER   │
                    │  (Active) │
                    │           │
                    │  + (Long) ├───────────────► GPIO 14
                    │           │
                    │  - (Short)├───────────────► GND
                    │           │
                    └───────────┘
```

### วิธีดูขั้ว Buzzer

```
               ┌─────────────┐
               │             │
               │   BUZZER    │
               │     (+)     │  ◄─── มีเครื่องหมาย + หรือขายาวกว่า
               │             │
               │  ┌─┐   ┌─┐  │
               └──┤ ├───┤ ├──┘
                  │ │   │ │
                  │ │   │ │
               Long│   Short
               (+) │   (-)
                   │     │
                   ▼     ▼
               GPIO 14  GND
```

---

## วงจร LCD I2C

### 📐 Schematic

```
                                    ESP32
                                      │
              ┌───────────────────────┼───────────────────────┐
              │                       │                       │
              │    ┌──────────────────┴──────────────────┐    │
              │    │          LCD 16x2 I2C               │    │
              │    │                                     │    │
              │    │    VCC ─────────────────────────────┼────┼───► ESP32 5V
              │    │                                     │    │
              │    │    GND ─────────────────────────────┼────┼───► ESP32 GND
              │    │                                     │    │
              │    │    SDA ─────────────────────────────┼────┼───► ESP32 GPIO 21
              │    │                                     │    │
              │    │    SCL ─────────────────────────────┼────┼───► ESP32 GPIO 22
              │    │                                     │    │
              │    │    ┌───────────────────────────┐    │    │
              │    │    │   ████████████████████    │    │    │
              │    │    │   ████████████████████    │    │    │
              │    │    └───────────────────────────┘    │    │
              │    │                                     │    │
              │    │    [POT] ◄── หมุนปรับความสว่าง      │    │
              │    │                                     │    │
              │    └─────────────────────────────────────┘    │
              │                                               │
              └───────────────────────────────────────────────┘
```

### 🔌 Connection List

| LCD Pin | ESP32 Pin | หน้าที่   |
| ------- | --------- | ---------------- |
| VCC     | 5V        | ไฟเลี้ยง |
| GND     | GND       | Ground           |
| SDA     | GPIO 21   | I2C Data         |
| SCL     | GPIO 22   | I2C Clock        |

### I2C Address

- **0x27** (พบบ่อยที่สุด)
- **0x3F** (บางรุ่น)

---

## วงจรปุ่มควบคุม

### 📐 Schematic - ปุ่ม Start

```
                    ESP32 GPIO 15
                          │
                          │ (Internal Pull-up = HIGH)
                          │
                    ┌─────┴─────┐
                    │           │
                    │  BUTTON   │
                    │  START    │
                    │           │
                    │     1 ────┼───────────────► GPIO 15
                    │           │
                    │     2 ────┼───────────────► GND
                    │           │
                    └───────────┘

        ปกติ:  GPIO 15 = HIGH (ไม่กด)
        กด:    GPIO 15 = LOW
```

### 📐 Schematic - ปุ่ม Emergency Stop (ต้องมี Pull-up)

```
                    ESP32 3.3V
                          │
                          │
                       [10kΩ]  ◄── Pull-up Resistor (จำเป็น!)
                          │
                    ┌─────┴─────┐
                    │           │
                    │  BUTTON   │
                    │  E-STOP   │
                    │           │
                    │     1 ────┼───────────────► GPIO 34
                    │           │
                    │     2 ────┼───────────────► GND
                    │           │
                    └───────────┘

        ปกติ:  GPIO 34 = HIGH (จาก Pull-up)
        กด:    GPIO 34 = LOW

        ⚠️ GPIO 34 เป็น Input Only ไม่มี Internal Pull-up
           ต้องต่อ Resistor 10kΩ ภายนอก!
```

---

## วงจร Encoder (Optional)

### 📐 Schematic

```
                    ESP32 3.3V
                          │
                ┌─────────┼─────────┐
                │         │         │
             [10kΩ]    [10kΩ]      │
                │         │         │
                │         │         │
      ┌─────────┴─────────┴─────────┴─────────┐
      │                                        │
      │           ROTARY ENCODER               │
      │                                        │
      │    VCC ────────────────────────────────┼───► ESP32 5V หรือ 3.3V
      │                                        │
      │    GND ────────────────────────────────┼───► ESP32 GND
      │                                        │
      │    A (CLK) ────────────────────────────┼───► GPIO 35 (+ Pull-up ที่ต่อไว้)
      │                                        │
      │    B (DT)  ────────────────────────────┼───► GPIO 36 (+ Pull-up ที่ต่อไว้)
      │                                        │
      └────────────────────────────────────────┘

        ⚠️ GPIO 35, 36 เป็น Input Only ไม่มี Internal Pull-up
           ต้องต่อ Resistor 10kΩ ภายนอก 2 ตัว!
```

### 🔌 Connection List

| Encoder Pin | ESP32 Pin        | Pull-up                        |
| ----------- | ---------------- | ------------------------------ |
| VCC         | 5V หรือ 3.3V | -                              |
| GND         | GND              | -                              |
| A (CLK)     | GPIO 35          | ต้องต่อ 10kΩ ไป 3.3V |
| B (DT)      | GPIO 36          | ต้องต่อ 10kΩ ไป 3.3V |

---

## วงจรจ่ายไฟ

### 📐 Power Distribution Schematic

```
                    ┌─────────────────────────────────────────────────────────────┐
                    │                      POWER SYSTEM                            │
                    │                                                              │
                    │   ┌───────────────┐                                         │
                    │   │ ADAPTER 12V   │                                         │
                    │   │    5A         │                                         │
                    │   └───────┬───────┘                                         │
                    │           │                                                  │
                    │           ▼                                                  │
                    │   ┌───────────────┐                                         │
                    │   │  12V BUS      ├──────────────────────────────────────┐  │
                    │   └───────┬───────┘                                      │  │
                    │           │                                              │  │
                    │     ┌─────┼─────┬─────────────┬─────────────┬───────┐   │  │
                    │     │     │     │             │             │       │   │  │
                    │     ▼     ▼     ▼             ▼             ▼       ▼   │  │
                    │  ┌─────┐┌─────┐┌─────┐   ┌─────┐       ┌─────┐   ┌─────┐│  │
                    │  │Motor││Motor││Motor│   │Motor│       │PUMP │   │Buck ││  │
                    │  │Left ││Right││  Z  │   │  Y  │       │12V  │   │Conv.││  │
                    │  │Drv  ││Drv  ││Drv  │   │Drv  │       │     │   │12→5V││  │
                    │  └─────┘└─────┘└─────┘   └─────┘       └─────┘   └──┬──┘│  │
                    │                                                     │   │  │
                    │                                                     ▼   │  │
                    │                                              ┌───────────┐ │
                    │                                              │  5V BUS   │ │
                    │                                              └─────┬─────┘ │
                    │                                                    │       │
                    │                           ┌───────────────┬────────┼───┐   │
                    │                           │               │        │   │   │
                    │                           ▼               ▼        ▼   │   │
                    │                       ┌───────┐       ┌─────┐  ┌─────┐ │   │
                    │                       │ESP32  │       │Relay│  │ LCD │ │   │
                    │                       │(VIN)  │       │     │  │     │ │   │
                    │                       └───┬───┘       └─────┘  └─────┘ │   │
                    │                           │                            │   │
                    │                           ▼                            │   │
                    │                       ┌───────┐                        │   │
                    │                       │3.3V   │ (ESP32 Regulator)      │   │
                    │                       │BUS    │                        │   │
                    │                       └───┬───┘                        │   │
                    │                           │                            │   │
                    │                    ┌──────┼──────┐                     │   │
                    │                    │      │      │                     │   │
                    │                    ▼      ▼      ▼                     │   │
                    │                 [10kΩ] [10kΩ] [10kΩ]                   │   │
                    │                    │      │      │                     │   │
                    │                    ▼      ▼      ▼                     │   │
                    │                 GPIO34 GPIO35 GPIO36                   │   │
                    │                 (E-Stop)(Enc A)(Enc B)                 │   │
                    │                                                        │   │
                    │                                                        │   │
                    │   ┌───────────────────────────────────────────────────┐│   │
                    │   │                  GND BUS (Common)                 ││   │
                    │   │  ─────────────────────────────────────────────────││   │
                    │   │    │     │     │     │     │     │     │         ││   │
                    │   │    ▼     ▼     ▼     ▼     ▼     ▼     ▼         ││   │
                    │   │  ESP32 Motor Motor Motor Relay  LCD   US         ││   │
                    │   │   GND  Drv   Drv   Drv   GND   GND   GND         ││   │
                    │   └───────────────────────────────────────────────────┘│   │
                    │                                                        │   │
                    └────────────────────────────────────────────────────────┘   │
                                                                                  │
                                                                                  ▼
                                                                            POWER GND
```

### ⚡ Power Requirements

| อุปกรณ์       | แรงดัน | กระแส (ประมาณ) |
| -------------------- | ------------ | ------------------------- |
| ESP32                | 5V           | 500mA                     |
| Motor x4             | 12V          | 500mA-2A ต่อตัว     |
| Relay                | 5V           | 50mA                      |
| LCD                  | 5V           | 30mA                      |
| Ultrasonic x3        | 5V           | 15mA x3                   |
| Buzzer               | 5V           | 30mA                      |
| **รวม 12V** |              | **~3-5A**           |
| **รวม 5V**  |              | **~700mA**          |

### 💡 คำแนะนำ

1. ใช้ **Power Supply 12V 5A** ขึ้นไป
2. ต่อ **GND ร่วม** ทุกอุปกรณ์ (สำคัญมาก!)
3. ใช้สายไฟที่หนาพอ (อย่างน้อย 18 AWG สำหรับ Motor)

---

## 🔧 เครื่องมือสร้างวงจร

### แนะนำ Software

- **Fritzing** - ง่ายสำหรับมือใหม่
- **KiCad** - ฟรี, Professional
- **EasyEDA** - ออนไลน์, ฟรี

### แนะนำ Simulator

- **Wokwi** - จำลอง ESP32 ออนไลน์
- **Tinkercad** - จำลองวงจร Arduino

---

**📌 หมายเหตุ**: แผนผังนี้เป็นแบบ Schematic สำหรับการอ้างอิง การต่อจริงอาจต้องปรับตามอุปกรณ์ที่ใช้
